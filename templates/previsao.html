<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Previs√£o de Desmatamento</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">

    <div class="container py-4">
        <h2 class="text-center mb-4">üìà Previs√£o de Desmatamento (Pr√≥ximos Anos)</h2>

        <div class="alert alert-info text-center">
            <strong>√öltimo ano observado:</strong> {{ ultimo_ano }}  
            <br>
            <strong>Modelo:</strong> Regress√£o Linear
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-body">
                <canvas id="graficoPrevisao" height="100"></canvas>
            </div>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                <h5 class="card-title">üìä Tabela de Previs√µes</h5>
                <table class="table table-striped table-bordered mt-3">
                    <thead class="table-dark">
                        <tr>
                            <th>Ano</th>
                            <th>√Årea Prevista (km¬≤)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for p in previsoes %}
                        <tr>
                            <td>{{ p.year }}</td>
                            <td>{{ "%.2f"|format(p.previsto_km2) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="/" class="btn btn-secondary">‚¨Ö Voltar</a>
        </div>
    </div>

    <script>
        // Dados do gr√°fico vindos do Flask
        const anos = {{ previsoes | map(attribute='year') | list | tojson }};
        const valores = {{ previsoes | map(attribute='previsto_km2') | list | tojson }};

        const ctx = document.getElementById('graficoPrevisao').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: anos,
                datasets: [{
                    label: '√Årea Prevista (km¬≤)',
                    data: valores,
                    borderColor: 'rgba(220,53,69,0.9)',
                    backgroundColor: 'rgba(220,53,69,0.3)',
                    borderWidth: 2,
                    tension: 0.3,
                    fill: true,
                    pointRadius
